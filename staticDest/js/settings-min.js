"use strict";function updateFullName(e){e.preventDefault(),ajax.open("POST","/api/settings"),ajax.setRequestHeader("token",token),ajax.setRequestHeader("Content-Type","application/json"),ajax.send(JSON.stringify({settings:{full_name:fullname.value}})),fullname.blur()}var profilePicture=document.querySelector("#profilePicture .icon"),iconInput=document.querySelector("#profilePicture #iconInput"),fullname=document.querySelector("#fullname input");profilePicture.addEventListener("click",function(e){iconInput.click()}),iconInput.addEventListener("change",function(e){var n=e.target.files[0],t=new FormData;t.append("image",n),ajax.open("POST","/api/settings/profilepicture/upload"),ajax.setRequestHeader("token",token),ajax.send(t),ajax.onload=function(){if(4===ajax.readyState&&200===ajax.status){var e=JSON.parse(ajax.response);e.success?(iconInput.value=null,window.open("/home","_self")):document.querySelector(".error").innerHTML=e.msg}}}),fullname.addEventListener("keydown",function(e){13===e.keyCode&&updateFullName(e)}),fullname.addEventListener("focusout",function(e){updateFullName(e)});